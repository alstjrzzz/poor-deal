<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.khao.PoorDeal.mapper.MemberMapper">

    <insert id="save" parameterType="com.khao.PoorDeal.domain.Member"> 
    
	    <selectKey keyProperty="id" resultType="long" order="BEFORE">
	        SELECT SEQ_MEMBER_ID.NEXTVAL FROM DUAL
	    </selectKey>
	    
	    INSERT INTO MEMBER (
	        ID, USER_ID, 
	        PASSWORD, 
	        USER_NAME, 
	        EMAIL, 
	        ROLE
	    ) VALUES (
	        #{id}, #{userId}, 
	        #{password}, 
	        #{userName}, 
	        #{email}, 
	        #{role}
	    )
	</insert>

	<select id="findByUserId" parameterType="string"
			resultType="com.khao.PoorDeal.domain.Member">
		SELECT *
		FROM MEMBER
		WHERE USER_ID = #{userId}
	</select>
	
</mapper>